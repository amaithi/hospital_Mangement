!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/cdk/keycodes"),require("@angular/cdk/overlay"),require("@angular/cdk/platform"),require("@angular/cdk/portal"),require("@angular/core"),require("ng-zorro-antd/button"),require("ng-zorro-antd/core"),require("rxjs"),require("rxjs/operators"),require("@angular/common"),require("@angular/forms"),require("ng-zorro-antd/icon"),require("ng-zorro-antd/menu")):"function"==typeof define&&define.amd?define("ng-zorro-antd/dropdown",["exports","@angular/cdk/keycodes","@angular/cdk/overlay","@angular/cdk/platform","@angular/cdk/portal","@angular/core","ng-zorro-antd/button","ng-zorro-antd/core","rxjs","rxjs/operators","@angular/common","@angular/forms","ng-zorro-antd/icon","ng-zorro-antd/menu"],t):t(((e=e||self)["ng-zorro-antd"]=e["ng-zorro-antd"]||{},e["ng-zorro-antd"].dropdown={}),e.ng.cdk.keycodes,e.ng.cdk.overlay,e.ng.cdk.platform,e.ng.cdk.portal,e.ng.core,e["ng-zorro-antd"].button,e["ng-zorro-antd"].core,e.rxjs,e.rxjs.operators,e.ng.common,e.ng.forms,e["ng-zorro-antd"].icon,e["ng-zorro-antd"].menu)}(this,(function(e,t,n,o,i,r,s,a,p,l,u,c,d,h){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var y=function(e,t){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function f(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s}function g(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function v(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,i,r=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(e){i={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return s}function b(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(v(arguments[t]));return e}var z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isInDropDown=!0,t}return function(e,t){function n(){this.constructor=e}y(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.decorators=[{type:r.Injectable}],t}(a.NzMenuBaseService);function m(e){return e.get(z)}var w=function(){function e(e,t,n,o,i,r){this.cdr=e,this.elementRef=t,this.renderer=n,this.viewContainerRef=o,this.nzMenuDropdownService=i,this.noAnimation=r,this.open=!1,this.triggerWidth=0,this.dropDownPosition="bottom",this.visible$=new p.Subject,this.nzTrigger="hover",this.nzPlacement="bottomLeft",this.nzOverlayClassName="",this.nzOverlayStyle={},this.nzTableFilter=!1}return e.prototype.setVisibleStateWhen=function(e,t){void 0===t&&(t="all"),this.nzTrigger!==t&&"all"!==t||this.visible$.next(e)},e.prototype.setValue=function(e,t){this[e]=t,this.cdr.markForCheck()},e.prototype.ngAfterContentInit=function(){this.renderer.removeChild(this.renderer.parentNode(this.elementRef.nativeElement),this.elementRef.nativeElement)},e.decorators=[{type:r.Component,args:[{selector:"nz-dropdown-menu",template:'<ng-template>\n  <div *ngIf="open" class="{{\'ant-dropdown nz-dropdown ant-dropdown-placement-\'+nzPlacement}}"\n       [ngClass]="nzOverlayClassName"\n       [ngStyle]="nzOverlayStyle"\n       [@slideMotion]="dropDownPosition"\n       [@.disabled]="noAnimation?.nzNoAnimation"\n       [nzNoAnimation]="noAnimation?.nzNoAnimation"\n       (mouseenter)="setVisibleStateWhen(true,\'hover\')"\n       (mouseleave)="setVisibleStateWhen(false,\'hover\')">\n    <div [class.ant-table-filter-dropdown]="nzTableFilter">\n      <ng-content></ng-content>\n    </div>\n  </div>\n</ng-template>',exportAs:"nzDropdownMenu",animations:[a.slideMotion],providers:[z,{provide:a.NzDropdownHigherOrderServiceToken,useFactory:m,deps:[[new r.Self,r.Injector]]}],preserveWhitespaces:!1,encapsulation:r.ViewEncapsulation.None,changeDetection:r.ChangeDetectionStrategy.OnPush,styles:["\n      :root .ant-dropdown.nz-dropdown {\n        top: 0;\n        left: 0;\n        position: relative;\n        width: 100%;\n        margin-top: 4px;\n        margin-bottom: 4px;\n      }\n    "]}]}],e.ctorParameters=function(){return[{type:r.ChangeDetectorRef},{type:r.ElementRef},{type:r.Renderer2},{type:r.ViewContainerRef},{type:z},{type:a.NzNoAnimationDirective,decorators:[{type:r.Host},{type:r.Optional}]}]},e.propDecorators={templateRef:[{type:r.ViewChild,args:[r.TemplateRef,{static:!0}]}]},e}();var S=function(){function e(e,t,n,o,i,s,u){this.elementRef=e,this.renderer=t,this.overlay=n,this.platform=o,this.nzButtonComponent=i,this.nzButtonGroupComponent=s,this.viewContainerRef=u,this.overlayRef=null,this.destroy$=new p.Subject,this.triggerWidth=0,this.el=this.elementRef.nativeElement,this.dropdownOpen=!1,this.positions=b(a.DEFAULT_DROPDOWN_POSITIONS),this.positionSubscription=p.Subscription.EMPTY,this.overlaySubscription=p.Subscription.EMPTY,this.hover$=p.merge(p.fromEvent(this.el,"mouseenter").pipe(l.mapTo(!0)),p.fromEvent(this.el,"mouseleave").pipe(l.mapTo(!1))),this.$click=p.fromEvent(this.el,"click").pipe(l.tap((function(e){return e.stopPropagation()})),l.mapTo(!0)),this.nzTrigger="hover",this.nzBackdrop=!0,this.nzClickHide=!0,this.nzDisabled=!1,this.nzVisible=!1,this.nzTableFilter=!1,this.nzOverlayClassName="",this.nzOverlayStyle={},this.nzPlacement="bottomLeft",this.nzVisibleChange=new r.EventEmitter,t.addClass(e.nativeElement,"ant-dropdown-trigger"),this.nzButtonComponent&&(this.nzButtonComponent.isInDropdown=!0),this.nzButtonGroupComponent&&(this.nzButtonGroupComponent.isInDropdown=!0)}return e.prototype.setDisabled=function(e){e?(this.renderer.setAttribute(this.el,"disabled",""),this.nzVisible&&(this.nzVisible=!1,this.nzVisibleChange.emit(this.nzVisible),this.updateOverlayByVisible())):this.renderer.removeAttribute(this.el,"disabled")},e.prototype.getOverlayConfig=function(){return new n.OverlayConfig({positionStrategy:this.overlay.position().flexibleConnectedTo(this.el).withLockedPosition(),minWidth:this.triggerWidth,hasBackdrop:"click"===this.nzTrigger,backdropClass:this.nzBackdrop?void 0:"nz-overlay-transparent-backdrop",scrollStrategy:this.overlay.scrollStrategies.reposition()})},e.prototype.createOverlay=function(){if(this.overlayRef){var e=this.overlayRef.getConfig();return this.updateOverlayConfig(e),this.overlayRef}var t=this.getOverlayConfig();return this.overlayRef=this.overlay.create(t),this.subscribeOverlayEvent(this.overlayRef),this.subscribeToPositions(t.positionStrategy),this.overlayRef},e.prototype.updateOverlayConfig=function(e){return e.minWidth=this.triggerWidth,e.hasBackdrop="click"===this.nzTrigger,e},e.prototype.dispose=function(){this.overlayRef&&(this.overlayRef.dispose(),this.overlayRef=null,this.positionSubscription.unsubscribe(),this.overlaySubscription.unsubscribe())},e.prototype.subscribeToPositions=function(e){var t=this;this.positionSubscription.unsubscribe(),this.positionSubscription=e.positionChanges.pipe(l.takeUntil(this.destroy$)).subscribe((function(e){t.nzDropdownMenu.setValue("dropDownPosition",e.connectionPair.originY)}))},e.prototype.subscribeOverlayEvent=function(e){var n=this;this.overlaySubscription.unsubscribe(),this.overlaySubscription=p.merge(e.backdropClick(),e.detachments(),e.keydownEvents().pipe(l.filter((function(e){return e.keyCode===t.ESCAPE&&!t.hasModifierKey(e)})))).pipe(l.takeUntil(this.destroy$)).subscribe((function(){n.nzDropdownMenu.setVisibleStateWhen(!1)}))},e.prototype.getPortal=function(){return this.portal&&this.portal.templateRef===this.nzDropdownMenu.templateRef||(this.portal=new i.TemplatePortal(this.nzDropdownMenu.templateRef,this.viewContainerRef)),this.portal},e.prototype.openMenu=function(){if(!this.dropdownOpen){var e=this.createOverlay(),t=e.getConfig();this.nzDropdownMenu.setValue("open",!0),this.setPosition(t.positionStrategy),e.attach(this.getPortal()),this.dropdownOpen=!0}},e.prototype.closeMenu=function(){this.overlayRef&&(this.overlayRef.detach(),this.dropdownOpen=!1,this.nzDropdownMenu.setValue("open",!1))},e.prototype.setPosition=function(e){this.positionStrategy=e,e.withPositions(b(this.positions))},e.prototype.updatePositionStrategy=function(e){this.positionStrategy&&this.positionStrategy.withPositions(e)},e.prototype.setTriggerWidth=function(){if(this.platform.isBrowser){var e=this.nzMatchWidthElement?this.nzMatchWidthElement.nativeElement:this.el;this.triggerWidth=e.getBoundingClientRect().width}},e.prototype.initActionSubscribe=function(){var e=this,t="hover"===this.nzTrigger?this.hover$:this.$click,n=this.nzDropdownMenu.visible$,o=this.nzClickHide?this.nzDropdownMenu.nzMenuDropdownService.menuItemClick$.pipe(l.mapTo(!1)):p.EMPTY,i=p.merge(n,t,o),r=this.nzDropdownMenu.nzMenuDropdownService.menuOpen$;p.combineLatest([i,r]).pipe(l.map((function(e){var t=v(e,2),n=t[0],o=t[1];return n||o})),l.debounceTime(50),l.distinctUntilChanged(),l.takeUntil(this.destroy$)).subscribe((function(t){e.nzDisabled||e.nzVisible===t||(e.nzVisible=t,e.updateOverlayByVisible(),e.nzVisibleChange.emit(e.nzVisible),e.setTriggerWidth(),e.nzDropdownMenu.setValue("triggerWidth",e.triggerWidth))}))},e.prototype.updateOverlayByVisible=function(){this.nzVisible?this.openMenu():this.closeMenu()},e.prototype.updateDisabledState=function(){this.setDisabled(this.nzDisabled)},e.prototype.regeneratePosition=function(e,t){return b([a.POSITION_MAP[e]],t)},e.prototype.ngAfterViewInit=function(){this.nzDropdownMenu&&(this.setTriggerWidth(),this.initActionSubscribe(),this.updateDisabledState())},e.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete(),this.dispose()},e.prototype.ngOnChanges=function(e){var t=e.nzVisible,n=e.nzTrigger,o=e.nzPlacement,i=e.nzDisabled,r=e.nzOverlayClassName,s=e.nzOverlayStyle,a=e.nzTableFilter;this.nzDropdownMenu&&(t&&(this.updateOverlayByVisible(),this.nzDropdownMenu.visible$.next(this.nzVisible)),n&&this.nzDropdownMenu.setValue("nzTrigger",this.nzTrigger),a&&this.nzDropdownMenu.setValue("nzTableFilter",this.nzTableFilter),r&&this.nzDropdownMenu.setValue("nzOverlayClassName",this.nzOverlayClassName),s&&this.nzDropdownMenu.setValue("nzOverlayStyle",this.nzOverlayStyle),o&&(this.nzDropdownMenu.setValue("nzPlacement",this.nzPlacement),this.nzDropdownMenu.setValue("dropDownPosition",-1!==this.nzDropdownMenu.nzPlacement.indexOf("top")?"top":"bottom"),this.positions=this.regeneratePosition(this.nzPlacement,this.positions),this.updatePositionStrategy(this.positions))),i&&this.updateDisabledState()},e.decorators=[{type:r.Directive,args:[{selector:"[nz-dropdown]",exportAs:"nzDropdown"}]}],e.ctorParameters=function(){return[{type:r.ElementRef},{type:r.Renderer2},{type:n.Overlay},{type:o.Platform},{type:s.NzButtonComponent,decorators:[{type:r.Optional},{type:r.Host}]},{type:s.NzButtonGroupComponent,decorators:[{type:r.Optional}]},{type:r.ViewContainerRef}]},e.propDecorators={nzDropdownMenu:[{type:r.Input}],nzTrigger:[{type:r.Input}],nzMatchWidthElement:[{type:r.Input}],nzBackdrop:[{type:r.Input}],nzClickHide:[{type:r.Input}],nzDisabled:[{type:r.Input}],nzVisible:[{type:r.Input}],nzTableFilter:[{type:r.Input}],nzOverlayClassName:[{type:r.Input}],nzOverlayStyle:[{type:r.Input}],nzPlacement:[{type:r.Input}],nzVisibleChange:[{type:r.Output}]},f([a.InputBoolean(),g("design:type",Object)],e.prototype,"nzBackdrop",void 0),f([a.InputBoolean(),g("design:type",Object)],e.prototype,"nzClickHide",void 0),f([a.InputBoolean(),g("design:type",Object)],e.prototype,"nzDisabled",void 0),f([a.InputBoolean(),g("design:type",Object)],e.prototype,"nzVisible",void 0),f([a.InputBoolean(),g("design:type",Object)],e.prototype,"nzTableFilter",void 0),e}();var O=function(){function e(){}return e.decorators=[{type:r.NgModule}],e}(),C=function(){function e(){}return e.decorators=[{type:r.NgModule}],e}(),D=function(){function e(e,t){this.elementRef=e,this.renderer=t,this.renderer.addClass(this.elementRef.nativeElement,"ant-dropdown-link")}return e.decorators=[{type:r.Directive,args:[{selector:"a[nz-dropdown]",exportAs:"nzDropdown"}]}],e.ctorParameters=function(){return[{type:r.ElementRef},{type:r.Renderer2}]},e}();var M=function(){function e(){}return e.decorators=[{type:r.NgModule,args:[{imports:[u.CommonModule,n.OverlayModule,c.FormsModule,s.NzButtonModule,h.NzMenuModule,d.NzIconModule,o.PlatformModule,a.NzNoAnimationModule,a.NzOverlayModule,O,C,a.NzAddOnModule],entryComponents:[w],declarations:[S,D,w],exports:[h.NzMenuModule,S,D,w]}]}],e}(),P=function(){function e(e){this.overlay=e,this.clickOutsideSubscription=p.Subscription.EMPTY,this.clickMenuSubscription=p.Subscription.EMPTY,this.positionSubscription=p.Subscription.EMPTY}return e.prototype.create=function(e,t){e.preventDefault();var n=this.createOverlay(e);n.hasAttached()&&this.close(),this.attachTemplatePortal(n,t),this.handleClickOutside()},e.prototype.close=function(){this.overlayRef&&(this.overlayRef.detach(),this.setOpenState(!1),this.clickOutsideSubscription.unsubscribe(),this.clickMenuSubscription.unsubscribe(),this.positionSubscription.unsubscribe())},e.prototype.handleClickOutside=function(){var e=this;this.clickOutsideSubscription.unsubscribe(),this.clickOutsideSubscription=p.fromEvent(document,"click").pipe(l.filter((function(t){return!!e.overlayRef&&!e.overlayRef.overlayElement.contains(t.target)})),l.filter((function(e){return 2!==e.button})),l.take(1)).subscribe((function(){e.close()}))},e.prototype.attachTemplatePortal=function(e,t){var n=this;this.nzDropdownMenuComponent=t,t.setValue("nzTrigger","click"),this.clickMenuSubscription.unsubscribe(),this.clickMenuSubscription=t.nzMenuDropdownService.menuItemClick$.subscribe((function(){n.close()})),e.attach(new i.TemplatePortal(t.templateRef,t.viewContainerRef)),this.setOpenState(!0)},e.prototype.setOpenState=function(e){this.nzDropdownMenuComponent.setValue("open",e)},e.prototype.getOverlayConfig=function(e){return new n.OverlayConfig({panelClass:"nz-dropdown-panel",positionStrategy:this.generatePositionStrategy(e),scrollStrategy:this.overlay.scrollStrategies.close()})},e.prototype.generatePositionStrategy=function(e){return this.overlay.position().flexibleConnectedTo({x:e.x,y:e.y}).withPositions([new n.ConnectionPositionPair({originX:"start",originY:"top"},{overlayX:"start",overlayY:"top"}),new n.ConnectionPositionPair({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"}),new n.ConnectionPositionPair({originX:"start",originY:"top"},{overlayX:"end",overlayY:"bottom"}),new n.ConnectionPositionPair({originX:"start",originY:"top"},{overlayX:"end",overlayY:"top"})])},e.prototype.subscribeToPositions=function(e){var t=this;this.positionSubscription.unsubscribe(),this.positionSubscription=e.positionChanges.subscribe((function(e){t.nzDropdownMenuComponent.setValue("dropDownPosition","bottom"===e.connectionPair.overlayY?"top":"bottom")}))},e.prototype.createOverlay=function(e){var t=this.getOverlayConfig(e);return this.overlayRef?this.updatePosition(this.overlayRef,e):this.overlayRef=this.overlay.create(t),this.subscribeToPositions(t.positionStrategy),this.overlayRef},e.prototype.updatePosition=function(e,t){e.updatePositionStrategy(this.generatePositionStrategy(t))},e.decorators=[{type:r.Injectable,args:[{providedIn:C}]}],e.ctorParameters=function(){return[{type:n.Overlay}]},e.ɵprov=r.ɵɵdefineInjectable({factory:function(){return new e(r.ɵɵinject(n.Overlay))},token:e,providedIn:C}),e}();e.NzContextMenuService=P,e.NzContextMenuServiceModule=C,e.NzDropDownADirective=D,e.NzDropDownDirective=S,e.NzDropDownModule=M,e.NzDropdownMenuComponent=w,e.NzDropdownServiceModule=O,e.NzMenuDropdownService=z,e.dropdownMenuServiceFactory=m,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ng-zorro-antd-dropdown.umd.min.js.map