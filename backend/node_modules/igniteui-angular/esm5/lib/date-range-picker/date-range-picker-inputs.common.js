import { __decorate, __extends } from "tslib";
import { Component, ContentChild, Pipe, Output, EventEmitter, HostListener, Directive } from '@angular/core';
import { formatDate } from '@angular/common';
import { NgControl } from '@angular/forms';
import { IgxInputDirective } from '../input-group/public_api';
import { IgxInputGroupComponent } from '../input-group/input-group.component';
import { IgxInputGroupBase } from '../input-group/input-group.common';
import { IgxDateTimeEditorDirective } from '../directives/date-time-editor/public_api';
/** @hidden @internal */
var DateRangePickerFormatPipe = /** @class */ (function () {
    function DateRangePickerFormatPipe() {
    }
    DateRangePickerFormatPipe.prototype.transform = function (values, inputFormat, locale) {
        if (!values) {
            return '';
        }
        var start = values.start, end = values.end;
        // TODO: move default locale from IgxDateTimeEditorDirective to its commons file/use displayFormat
        var startDate = inputFormat ? formatDate(start, inputFormat, locale || 'en') : start === null || start === void 0 ? void 0 : start.toLocaleDateString();
        var endDate = inputFormat ? formatDate(end, inputFormat, locale || 'en') : end === null || end === void 0 ? void 0 : end.toLocaleDateString();
        var formatted;
        if (start) {
            formatted = startDate + " - ";
            if (end) {
                formatted += endDate;
            }
        }
        // TODO: no need to set format twice
        return formatted ? formatted : '';
    };
    DateRangePickerFormatPipe = __decorate([
        Pipe({ name: 'dateRange' })
    ], DateRangePickerFormatPipe);
    return DateRangePickerFormatPipe;
}());
export { DateRangePickerFormatPipe };
/** @hidden @internal */
var IgxDateRangeInputsBaseComponent = /** @class */ (function (_super) {
    __extends(IgxDateRangeInputsBaseComponent, _super);
    function IgxDateRangeInputsBaseComponent() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    IgxDateRangeInputsBaseComponent_1 = IgxDateRangeInputsBaseComponent;
    Object.defineProperty(IgxDateRangeInputsBaseComponent.prototype, "nativeElement", {
        /** @hidden @internal */
        get: function () {
            return this.element.nativeElement;
        },
        enumerable: true,
        configurable: true
    });
    /** @hidden @internal */
    IgxDateRangeInputsBaseComponent.prototype.setFocus = function () {
        this.input.focus();
    };
    /** @hidden @internal */
    IgxDateRangeInputsBaseComponent.prototype.updateInputValue = function (value) {
        if (this.ngControl) {
            this.ngControl.control.setValue(value);
        }
        else {
            this.dateTimeEditor.value = value;
        }
    };
    /** @hidden @internal */
    IgxDateRangeInputsBaseComponent.prototype.updateInputValidity = function (state) {
        this.inputDirective.valid = state;
    };
    var IgxDateRangeInputsBaseComponent_1;
    __decorate([
        ContentChild(NgControl)
    ], IgxDateRangeInputsBaseComponent.prototype, "ngControl", void 0);
    __decorate([
        ContentChild(IgxDateTimeEditorDirective)
    ], IgxDateRangeInputsBaseComponent.prototype, "dateTimeEditor", void 0);
    __decorate([
        ContentChild(IgxInputDirective)
    ], IgxDateRangeInputsBaseComponent.prototype, "inputDirective", void 0);
    IgxDateRangeInputsBaseComponent = IgxDateRangeInputsBaseComponent_1 = __decorate([
        Component({
            template: "",
            selector: "igx-date-range-base",
            providers: [{ provide: IgxInputGroupBase, useExisting: IgxDateRangeInputsBaseComponent_1 }]
        })
    ], IgxDateRangeInputsBaseComponent);
    return IgxDateRangeInputsBaseComponent;
}(IgxInputGroupComponent));
export { IgxDateRangeInputsBaseComponent };
/**
 * Templates the default icon in the `IgxDateRangePicker`.
 *
 * @igxModule IgxDateRangePickerModule
 *
 * @igxKeyWords date range icon, date picker icon
 *
 * @igxGroup scheduling
 *
 * @example
 * ```html
 * <igx-date-range-picker>
 *   <igx-picker-toggle igxSuffix>
 *      <igx-icon>calendar_view_day</igx-icon>
 *   </igx-picker-toggle>
 * </igx-date-range-picker>
 * ```
 */
var IgxPickerToggleComponent = /** @class */ (function () {
    function IgxPickerToggleComponent() {
        this.clicked = new EventEmitter();
    }
    IgxPickerToggleComponent.prototype.onClick = function (event) {
        // do not focus input on click
        event.stopPropagation();
        this.clicked.emit();
    };
    __decorate([
        Output()
    ], IgxPickerToggleComponent.prototype, "clicked", void 0);
    __decorate([
        HostListener('click', ['$event'])
    ], IgxPickerToggleComponent.prototype, "onClick", null);
    IgxPickerToggleComponent = __decorate([
        Component({
            template: "<ng-content></ng-content>",
            selector: 'igx-picker-toggle'
        })
    ], IgxPickerToggleComponent);
    return IgxPickerToggleComponent;
}());
export { IgxPickerToggleComponent };
/**
 * Defines the start input for a date range picker
 *
 * @igxModule IgxDateRangePickerModule
 *
 * @igxTheme igx-input-group-theme, igx-calendar-theme, igx-date-range-picker-theme
 *
 * @igxKeywords date, range, date range, date picker
 *
 * @igxGroup scheduling
 *
 * @remarks
 * When templating, start input has to be templated separately
 *
 * @example
 * ```html
 * <igx-date-range-picker mode="dropdown">
 *      <igx-date-range-start>
 *          <input igxInput igxDateTimeEditor type="text">
 *      </igx-date-range-start>
 *      ...
 * </igx-date-range-picker>
 * ```
 */
var IgxDateRangeStartComponent = /** @class */ (function (_super) {
    __extends(IgxDateRangeStartComponent, _super);
    function IgxDateRangeStartComponent() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    IgxDateRangeStartComponent_1 = IgxDateRangeStartComponent;
    var IgxDateRangeStartComponent_1;
    IgxDateRangeStartComponent = IgxDateRangeStartComponent_1 = __decorate([
        Component({
            selector: 'igx-date-range-start',
            template: "<div class=\"igx-input-group__wrapper\" *ngIf=\"isTypeBox; else bundle\">\n    <ng-container *ngTemplateOutlet=\"bundle\"></ng-container>\n</div>\n\n<div class=\"igx-input-group__hint\">\n    <ng-content select=\"igx-hint,[igxHint]\"></ng-content>\n</div>\n\n<ng-template #label>\n    <ng-content select=\"[igxLabel]\"></ng-content>\n</ng-template>\n\n<ng-template #input>\n    <ng-content select=\"[igxInput]\"></ng-content>\n</ng-template>\n\n<ng-template #inputBundle>\n    <ng-container *ngIf=\"!isNotMaterial\">\n        <ng-container *ngTemplateOutlet=\"label\"></ng-container>\n    </ng-container>\n\n    <ng-container *ngTemplateOutlet=\"input\"></ng-container>\n</ng-template>\n\n<ng-template #bundle>\n    <ng-container *ngIf=\"isNotMaterial\">\n        <ng-container *ngTemplateOutlet=\"label\"></ng-container>\n    </ng-container>\n\n    <div class=\"igx-input-group__bundle\">\n        <ng-content select=\"igx-prefix,[igxPrefix]\"></ng-content>\n\n        <div *ngIf=\"!isTypeBootstrap; else inputBundle\" class=\"igx-input-group__bundle-main\">\n\n            <ng-container *ngIf=\"!isNotMaterial\">\n                <ng-container *ngTemplateOutlet=\"label\"></ng-container>\n            </ng-container>\n\n            <ng-container *ngTemplateOutlet=\"input\"></ng-container>\n        </div>\n\n        <ng-content select=\"igx-suffix,[igxSuffix]\"></ng-content>\n    </div>\n    <div class=\"igx-input-group__border\" *ngIf=\"hasBorder\"></div>\n</ng-template>\n",
            providers: [
                { provide: IgxInputGroupBase, useExisting: IgxDateRangeStartComponent_1 },
                { provide: IgxDateRangeInputsBaseComponent, useExisting: IgxDateRangeStartComponent_1 }
            ]
        })
    ], IgxDateRangeStartComponent);
    return IgxDateRangeStartComponent;
}(IgxDateRangeInputsBaseComponent));
export { IgxDateRangeStartComponent };
/**
 * Defines the end input for a date range picker
 *
 * @igxModule IgxDateRangeModule
 *
 * @igxTheme igx-input-group-theme, igx-calendar-theme, igx-date-range-picker-theme
 *
 * @igxKeywords date, range, date range, date picker
 *
 * @igxGroup scheduling
 *
 * @remarks
 * When templating, end input has to be template separately
 *
 * @example
 * ```html
 * <igx-date-range-picker mode="dropdown">
 *      <igx-date-range-end>
 *          <input igxInput igxDateTimeEditor type="text">
 *      </igx-date-range-end>
 *      ...
 * </igx-date-range-picker>
 * ```
 */
var IgxDateRangeEndComponent = /** @class */ (function (_super) {
    __extends(IgxDateRangeEndComponent, _super);
    function IgxDateRangeEndComponent() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    IgxDateRangeEndComponent_1 = IgxDateRangeEndComponent;
    var IgxDateRangeEndComponent_1;
    IgxDateRangeEndComponent = IgxDateRangeEndComponent_1 = __decorate([
        Component({
            selector: 'igx-date-range-end',
            template: "<div class=\"igx-input-group__wrapper\" *ngIf=\"isTypeBox; else bundle\">\n    <ng-container *ngTemplateOutlet=\"bundle\"></ng-container>\n</div>\n\n<div class=\"igx-input-group__hint\">\n    <ng-content select=\"igx-hint,[igxHint]\"></ng-content>\n</div>\n\n<ng-template #label>\n    <ng-content select=\"[igxLabel]\"></ng-content>\n</ng-template>\n\n<ng-template #input>\n    <ng-content select=\"[igxInput]\"></ng-content>\n</ng-template>\n\n<ng-template #inputBundle>\n    <ng-container *ngIf=\"!isNotMaterial\">\n        <ng-container *ngTemplateOutlet=\"label\"></ng-container>\n    </ng-container>\n\n    <ng-container *ngTemplateOutlet=\"input\"></ng-container>\n</ng-template>\n\n<ng-template #bundle>\n    <ng-container *ngIf=\"isNotMaterial\">\n        <ng-container *ngTemplateOutlet=\"label\"></ng-container>\n    </ng-container>\n\n    <div class=\"igx-input-group__bundle\">\n        <ng-content select=\"igx-prefix,[igxPrefix]\"></ng-content>\n\n        <div *ngIf=\"!isTypeBootstrap; else inputBundle\" class=\"igx-input-group__bundle-main\">\n\n            <ng-container *ngIf=\"!isNotMaterial\">\n                <ng-container *ngTemplateOutlet=\"label\"></ng-container>\n            </ng-container>\n\n            <ng-container *ngTemplateOutlet=\"input\"></ng-container>\n        </div>\n\n        <ng-content select=\"igx-suffix,[igxSuffix]\"></ng-content>\n    </div>\n    <div class=\"igx-input-group__border\" *ngIf=\"hasBorder\"></div>\n</ng-template>\n",
            providers: [
                { provide: IgxInputGroupBase, useExisting: IgxDateRangeEndComponent_1 },
                { provide: IgxDateRangeInputsBaseComponent, useExisting: IgxDateRangeEndComponent_1 }
            ]
        })
    ], IgxDateRangeEndComponent);
    return IgxDateRangeEndComponent;
}(IgxDateRangeInputsBaseComponent));
export { IgxDateRangeEndComponent };
var IgxDateRangeSeparatorDirective = /** @class */ (function () {
    function IgxDateRangeSeparatorDirective() {
    }
    IgxDateRangeSeparatorDirective = __decorate([
        Directive({
            selector: '[igxDateRangeSeparator]'
        })
    ], IgxDateRangeSeparatorDirective);
    return IgxDateRangeSeparatorDirective;
}());
export { IgxDateRangeSeparatorDirective };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0ZS1yYW5nZS1waWNrZXItaW5wdXRzLmNvbW1vbi5qcyIsInNvdXJjZVJvb3QiOiJuZzovL2lnbml0ZXVpLWFuZ3VsYXIvIiwic291cmNlcyI6WyJsaWIvZGF0ZS1yYW5nZS1waWNrZXIvZGF0ZS1yYW5nZS1waWNrZXItaW5wdXRzLmNvbW1vbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsSUFBSSxFQUFpQixNQUFNLEVBQUUsWUFBWSxFQUFFLFlBQVksRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDNUgsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQzdDLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUMzQyxPQUFPLEVBQUUsaUJBQWlCLEVBQWlCLE1BQU0sMkJBQTJCLENBQUM7QUFDN0UsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sc0NBQXNDLENBQUM7QUFDOUUsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sbUNBQW1DLENBQUM7QUFDdEUsT0FBTyxFQUFFLDBCQUEwQixFQUFFLE1BQU0sMkNBQTJDLENBQUM7QUFVdkYsd0JBQXdCO0FBRXhCO0lBQUE7SUFvQkEsQ0FBQztJQW5CVSw2Q0FBUyxHQUFoQixVQUFpQixNQUFpQixFQUFFLFdBQW9CLEVBQUUsTUFBZTtRQUNyRSxJQUFJLENBQUMsTUFBTSxFQUFFO1lBQ1QsT0FBTyxFQUFFLENBQUM7U0FDYjtRQUNPLElBQUEsb0JBQUssRUFBRSxnQkFBRyxDQUFZO1FBQzlCLGtHQUFrRztRQUNsRyxJQUFNLFNBQVMsR0FBRyxXQUFXLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsV0FBVyxFQUFFLE1BQU0sSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxhQUFMLEtBQUssdUJBQUwsS0FBSyxDQUFFLGtCQUFrQixFQUFFLENBQUM7UUFDN0csSUFBTSxPQUFPLEdBQUcsV0FBVyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsR0FBRyxFQUFFLFdBQVcsRUFBRSxNQUFNLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsYUFBSCxHQUFHLHVCQUFILEdBQUcsQ0FBRSxrQkFBa0IsRUFBRSxDQUFDO1FBQ3ZHLElBQUksU0FBUyxDQUFDO1FBQ2QsSUFBSSxLQUFLLEVBQUU7WUFDUCxTQUFTLEdBQU0sU0FBUyxRQUFLLENBQUM7WUFDOUIsSUFBSSxHQUFHLEVBQUU7Z0JBQ0wsU0FBUyxJQUFJLE9BQU8sQ0FBQzthQUN4QjtTQUNKO1FBRUQsb0NBQW9DO1FBQ3BDLE9BQU8sU0FBUyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUN0QyxDQUFDO0lBbkJRLHlCQUF5QjtRQURyQyxJQUFJLENBQUMsRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUFFLENBQUM7T0FDZix5QkFBeUIsQ0FvQnJDO0lBQUQsZ0NBQUM7Q0FBQSxBQXBCRCxJQW9CQztTQXBCWSx5QkFBeUI7QUFzQnRDLHdCQUF3QjtBQU14QjtJQUFxRCxtREFBc0I7SUFBM0U7O0lBa0NBLENBQUM7d0NBbENZLCtCQUErQjtJQVd4QyxzQkFBVywwREFBYTtRQUR4Qix3QkFBd0I7YUFDeEI7WUFDSSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDO1FBQ3RDLENBQUM7OztPQUFBO0lBRUQsd0JBQXdCO0lBQ2pCLGtEQUFRLEdBQWY7UUFDSSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ3ZCLENBQUM7SUFFRCx3QkFBd0I7SUFDakIsMERBQWdCLEdBQXZCLFVBQXdCLEtBQVc7UUFDL0IsSUFBSSxJQUFJLENBQUMsU0FBUyxFQUFFO1lBQ2hCLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUMxQzthQUFNO1lBQ0gsSUFBSSxDQUFDLGNBQWMsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1NBQ3JDO0lBQ0wsQ0FBQztJQUVELHdCQUF3QjtJQUNqQiw2REFBbUIsR0FBMUIsVUFBMkIsS0FBb0I7UUFDM0MsSUFBSSxDQUFDLGNBQWMsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO0lBQ3RDLENBQUM7O0lBOUJEO1FBREMsWUFBWSxDQUFDLFNBQVMsQ0FBQztzRUFDTztJQUcvQjtRQURDLFlBQVksQ0FBQywwQkFBMEIsQ0FBQzsyRUFDUztJQUdsRDtRQURDLFlBQVksQ0FBQyxpQkFBaUIsQ0FBQzsyRUFDUztJQVJoQywrQkFBK0I7UUFMM0MsU0FBUyxDQUFDO1lBQ1AsUUFBUSxFQUFFLEVBQUU7WUFDWixRQUFRLEVBQUUscUJBQXFCO1lBQy9CLFNBQVMsRUFBRSxDQUFDLEVBQUUsT0FBTyxFQUFFLGlCQUFpQixFQUFFLFdBQVcsRUFBRSxpQ0FBK0IsRUFBRSxDQUFDO1NBQzVGLENBQUM7T0FDVywrQkFBK0IsQ0FrQzNDO0lBQUQsc0NBQUM7Q0FBQSxBQWxDRCxDQUFxRCxzQkFBc0IsR0FrQzFFO1NBbENZLCtCQUErQjtBQW9DNUM7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBaUJHO0FBS0g7SUFBQTtRQUVXLFlBQU8sR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO0lBUXhDLENBQUM7SUFMVSwwQ0FBTyxHQUFkLFVBQWUsS0FBaUI7UUFDNUIsOEJBQThCO1FBQzlCLEtBQUssQ0FBQyxlQUFlLEVBQUUsQ0FBQztRQUN4QixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ3hCLENBQUM7SUFQRDtRQURDLE1BQU0sRUFBRTs2REFDMkI7SUFHcEM7UUFEQyxZQUFZLENBQUMsT0FBTyxFQUFFLENBQUMsUUFBUSxDQUFDLENBQUM7MkRBS2pDO0lBVFEsd0JBQXdCO1FBSnBDLFNBQVMsQ0FBQztZQUNQLFFBQVEsRUFBRSwyQkFBMkI7WUFDckMsUUFBUSxFQUFFLG1CQUFtQjtTQUNoQyxDQUFDO09BQ1csd0JBQXdCLENBVXBDO0lBQUQsK0JBQUM7Q0FBQSxBQVZELElBVUM7U0FWWSx3QkFBd0I7QUFZckM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBdUJHO0FBU0g7SUFBZ0QsOENBQStCO0lBQS9FOztJQUFrRixDQUFDO21DQUF0RSwwQkFBMEI7O0lBQTFCLDBCQUEwQjtRQVJ0QyxTQUFTLENBQUM7WUFDUCxRQUFRLEVBQUUsc0JBQXNCO1lBQ2hDLG05Q0FBd0Q7WUFDeEQsU0FBUyxFQUFFO2dCQUNQLEVBQUUsT0FBTyxFQUFFLGlCQUFpQixFQUFFLFdBQVcsRUFBRSw0QkFBMEIsRUFBRTtnQkFDdkUsRUFBRSxPQUFPLEVBQUUsK0JBQStCLEVBQUUsV0FBVyxFQUFFLDRCQUEwQixFQUFFO2FBQ3hGO1NBQ0osQ0FBQztPQUNXLDBCQUEwQixDQUE0QztJQUFELGlDQUFDO0NBQUEsQUFBbkYsQ0FBZ0QsK0JBQStCLEdBQUk7U0FBdEUsMEJBQTBCO0FBRXZDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQXVCRztBQVNIO0lBQThDLDRDQUErQjtJQUE3RTs7SUFBZ0YsQ0FBQztpQ0FBcEUsd0JBQXdCOztJQUF4Qix3QkFBd0I7UUFScEMsU0FBUyxDQUFDO1lBQ1AsUUFBUSxFQUFFLG9CQUFvQjtZQUM5QixtOUNBQXdEO1lBQ3hELFNBQVMsRUFBRTtnQkFDUCxFQUFFLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxXQUFXLEVBQUUsMEJBQXdCLEVBQUU7Z0JBQ3JFLEVBQUUsT0FBTyxFQUFFLCtCQUErQixFQUFFLFdBQVcsRUFBRSwwQkFBd0IsRUFBRTthQUN0RjtTQUNKLENBQUM7T0FDVyx3QkFBd0IsQ0FBNEM7SUFBRCwrQkFBQztDQUFBLEFBQWpGLENBQThDLCtCQUErQixHQUFJO1NBQXBFLHdCQUF3QjtBQUtyQztJQUFBO0lBQ0EsQ0FBQztJQURZLDhCQUE4QjtRQUgxQyxTQUFTLENBQUM7WUFDUCxRQUFRLEVBQUUseUJBQXlCO1NBQ3RDLENBQUM7T0FDVyw4QkFBOEIsQ0FDMUM7SUFBRCxxQ0FBQztDQUFBLEFBREQsSUFDQztTQURZLDhCQUE4QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgQ29udGVudENoaWxkLCBQaXBlLCBQaXBlVHJhbnNmb3JtLCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgSG9zdExpc3RlbmVyLCBEaXJlY3RpdmUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IGZvcm1hdERhdGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgTmdDb250cm9sIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgSWd4SW5wdXREaXJlY3RpdmUsIElneElucHV0U3RhdGUgfSBmcm9tICcuLi9pbnB1dC1ncm91cC9wdWJsaWNfYXBpJztcbmltcG9ydCB7IElneElucHV0R3JvdXBDb21wb25lbnQgfSBmcm9tICcuLi9pbnB1dC1ncm91cC9pbnB1dC1ncm91cC5jb21wb25lbnQnO1xuaW1wb3J0IHsgSWd4SW5wdXRHcm91cEJhc2UgfSBmcm9tICcuLi9pbnB1dC1ncm91cC9pbnB1dC1ncm91cC5jb21tb24nO1xuaW1wb3J0IHsgSWd4RGF0ZVRpbWVFZGl0b3JEaXJlY3RpdmUgfSBmcm9tICcuLi9kaXJlY3RpdmVzL2RhdGUtdGltZS1lZGl0b3IvcHVibGljX2FwaSc7XG5cbi8qKlxuICogUmVwcmVzZW50cyBhIHJhbmdlIGJldHdlZW4gdHdvIGRhdGVzLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIERhdGVSYW5nZSB7XG4gICAgc3RhcnQ6IERhdGU7XG4gICAgZW5kOiBEYXRlO1xufVxuXG4vKiogQGhpZGRlbiBAaW50ZXJuYWwgKi9cbkBQaXBlKHsgbmFtZTogJ2RhdGVSYW5nZScgfSlcbmV4cG9ydCBjbGFzcyBEYXRlUmFuZ2VQaWNrZXJGb3JtYXRQaXBlIGltcGxlbWVudHMgUGlwZVRyYW5zZm9ybSB7XG4gICAgcHVibGljIHRyYW5zZm9ybSh2YWx1ZXM6IERhdGVSYW5nZSwgaW5wdXRGb3JtYXQ/OiBzdHJpbmcsIGxvY2FsZT86IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGlmICghdmFsdWVzKSB7XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBzdGFydCwgZW5kIH0gPSB2YWx1ZXM7XG4gICAgICAgIC8vIFRPRE86IG1vdmUgZGVmYXVsdCBsb2NhbGUgZnJvbSBJZ3hEYXRlVGltZUVkaXRvckRpcmVjdGl2ZSB0byBpdHMgY29tbW9ucyBmaWxlL3VzZSBkaXNwbGF5Rm9ybWF0XG4gICAgICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IGlucHV0Rm9ybWF0ID8gZm9ybWF0RGF0ZShzdGFydCwgaW5wdXRGb3JtYXQsIGxvY2FsZSB8fCAnZW4nKSA6IHN0YXJ0Py50b0xvY2FsZURhdGVTdHJpbmcoKTtcbiAgICAgICAgY29uc3QgZW5kRGF0ZSA9IGlucHV0Rm9ybWF0ID8gZm9ybWF0RGF0ZShlbmQsIGlucHV0Rm9ybWF0LCBsb2NhbGUgfHwgJ2VuJykgOiBlbmQ/LnRvTG9jYWxlRGF0ZVN0cmluZygpO1xuICAgICAgICBsZXQgZm9ybWF0dGVkO1xuICAgICAgICBpZiAoc3RhcnQpIHtcbiAgICAgICAgICAgIGZvcm1hdHRlZCA9IGAke3N0YXJ0RGF0ZX0gLSBgO1xuICAgICAgICAgICAgaWYgKGVuZCkge1xuICAgICAgICAgICAgICAgIGZvcm1hdHRlZCArPSBlbmREYXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gVE9ETzogbm8gbmVlZCB0byBzZXQgZm9ybWF0IHR3aWNlXG4gICAgICAgIHJldHVybiBmb3JtYXR0ZWQgPyBmb3JtYXR0ZWQgOiAnJztcbiAgICB9XG59XG5cbi8qKiBAaGlkZGVuIEBpbnRlcm5hbCAqL1xuQENvbXBvbmVudCh7XG4gICAgdGVtcGxhdGU6IGBgLFxuICAgIHNlbGVjdG9yOiBgaWd4LWRhdGUtcmFuZ2UtYmFzZWAsXG4gICAgcHJvdmlkZXJzOiBbeyBwcm92aWRlOiBJZ3hJbnB1dEdyb3VwQmFzZSwgdXNlRXhpc3Rpbmc6IElneERhdGVSYW5nZUlucHV0c0Jhc2VDb21wb25lbnQgfV1cbn0pXG5leHBvcnQgY2xhc3MgSWd4RGF0ZVJhbmdlSW5wdXRzQmFzZUNvbXBvbmVudCBleHRlbmRzIElneElucHV0R3JvdXBDb21wb25lbnQge1xuICAgIEBDb250ZW50Q2hpbGQoTmdDb250cm9sKVxuICAgIHByb3RlY3RlZCBuZ0NvbnRyb2w6IE5nQ29udHJvbDtcblxuICAgIEBDb250ZW50Q2hpbGQoSWd4RGF0ZVRpbWVFZGl0b3JEaXJlY3RpdmUpXG4gICAgcHVibGljIGRhdGVUaW1lRWRpdG9yOiBJZ3hEYXRlVGltZUVkaXRvckRpcmVjdGl2ZTtcblxuICAgIEBDb250ZW50Q2hpbGQoSWd4SW5wdXREaXJlY3RpdmUpXG4gICAgcHVibGljIGlucHV0RGlyZWN0aXZlOiBJZ3hJbnB1dERpcmVjdGl2ZTtcblxuICAgIC8qKiBAaGlkZGVuIEBpbnRlcm5hbCAqL1xuICAgIHB1YmxpYyBnZXQgbmF0aXZlRWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5uYXRpdmVFbGVtZW50O1xuICAgIH1cblxuICAgIC8qKiBAaGlkZGVuIEBpbnRlcm5hbCAqL1xuICAgIHB1YmxpYyBzZXRGb2N1cygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5pbnB1dC5mb2N1cygpO1xuICAgIH1cblxuICAgIC8qKiBAaGlkZGVuIEBpbnRlcm5hbCAqL1xuICAgIHB1YmxpYyB1cGRhdGVJbnB1dFZhbHVlKHZhbHVlOiBEYXRlKSB7XG4gICAgICAgIGlmICh0aGlzLm5nQ29udHJvbCkge1xuICAgICAgICAgICAgdGhpcy5uZ0NvbnRyb2wuY29udHJvbC5zZXRWYWx1ZSh2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRhdGVUaW1lRWRpdG9yLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiogQGhpZGRlbiBAaW50ZXJuYWwgKi9cbiAgICBwdWJsaWMgdXBkYXRlSW5wdXRWYWxpZGl0eShzdGF0ZTogSWd4SW5wdXRTdGF0ZSkge1xuICAgICAgICB0aGlzLmlucHV0RGlyZWN0aXZlLnZhbGlkID0gc3RhdGU7XG4gICAgfVxuXG59XG5cbi8qKlxuICogVGVtcGxhdGVzIHRoZSBkZWZhdWx0IGljb24gaW4gdGhlIGBJZ3hEYXRlUmFuZ2VQaWNrZXJgLlxuICpcbiAqIEBpZ3hNb2R1bGUgSWd4RGF0ZVJhbmdlUGlja2VyTW9kdWxlXG4gKlxuICogQGlneEtleVdvcmRzIGRhdGUgcmFuZ2UgaWNvbiwgZGF0ZSBwaWNrZXIgaWNvblxuICpcbiAqIEBpZ3hHcm91cCBzY2hlZHVsaW5nXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYGh0bWxcbiAqIDxpZ3gtZGF0ZS1yYW5nZS1waWNrZXI+XG4gKiAgIDxpZ3gtcGlja2VyLXRvZ2dsZSBpZ3hTdWZmaXg+XG4gKiAgICAgIDxpZ3gtaWNvbj5jYWxlbmRhcl92aWV3X2RheTwvaWd4LWljb24+XG4gKiAgIDwvaWd4LXBpY2tlci10b2dnbGU+XG4gKiA8L2lneC1kYXRlLXJhbmdlLXBpY2tlcj5cbiAqIGBgYFxuICovXG5AQ29tcG9uZW50KHtcbiAgICB0ZW1wbGF0ZTogYDxuZy1jb250ZW50PjwvbmctY29udGVudD5gLFxuICAgIHNlbGVjdG9yOiAnaWd4LXBpY2tlci10b2dnbGUnXG59KVxuZXhwb3J0IGNsYXNzIElneFBpY2tlclRvZ2dsZUNvbXBvbmVudCB7XG4gICAgQE91dHB1dCgpXG4gICAgcHVibGljIGNsaWNrZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgICBASG9zdExpc3RlbmVyKCdjbGljaycsIFsnJGV2ZW50J10pXG4gICAgcHVibGljIG9uQ2xpY2soZXZlbnQ6IE1vdXNlRXZlbnQpIHtcbiAgICAgICAgLy8gZG8gbm90IGZvY3VzIGlucHV0IG9uIGNsaWNrXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB0aGlzLmNsaWNrZWQuZW1pdCgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBEZWZpbmVzIHRoZSBzdGFydCBpbnB1dCBmb3IgYSBkYXRlIHJhbmdlIHBpY2tlclxuICpcbiAqIEBpZ3hNb2R1bGUgSWd4RGF0ZVJhbmdlUGlja2VyTW9kdWxlXG4gKlxuICogQGlneFRoZW1lIGlneC1pbnB1dC1ncm91cC10aGVtZSwgaWd4LWNhbGVuZGFyLXRoZW1lLCBpZ3gtZGF0ZS1yYW5nZS1waWNrZXItdGhlbWVcbiAqXG4gKiBAaWd4S2V5d29yZHMgZGF0ZSwgcmFuZ2UsIGRhdGUgcmFuZ2UsIGRhdGUgcGlja2VyXG4gKlxuICogQGlneEdyb3VwIHNjaGVkdWxpbmdcbiAqXG4gKiBAcmVtYXJrc1xuICogV2hlbiB0ZW1wbGF0aW5nLCBzdGFydCBpbnB1dCBoYXMgdG8gYmUgdGVtcGxhdGVkIHNlcGFyYXRlbHlcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgaHRtbFxuICogPGlneC1kYXRlLXJhbmdlLXBpY2tlciBtb2RlPVwiZHJvcGRvd25cIj5cbiAqICAgICAgPGlneC1kYXRlLXJhbmdlLXN0YXJ0PlxuICogICAgICAgICAgPGlucHV0IGlneElucHV0IGlneERhdGVUaW1lRWRpdG9yIHR5cGU9XCJ0ZXh0XCI+XG4gKiAgICAgIDwvaWd4LWRhdGUtcmFuZ2Utc3RhcnQ+XG4gKiAgICAgIC4uLlxuICogPC9pZ3gtZGF0ZS1yYW5nZS1waWNrZXI+XG4gKiBgYGBcbiAqL1xuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdpZ3gtZGF0ZS1yYW5nZS1zdGFydCcsXG4gICAgdGVtcGxhdGVVcmw6ICcuLi9pbnB1dC1ncm91cC9pbnB1dC1ncm91cC5jb21wb25lbnQuaHRtbCcsXG4gICAgcHJvdmlkZXJzOiBbXG4gICAgICAgIHsgcHJvdmlkZTogSWd4SW5wdXRHcm91cEJhc2UsIHVzZUV4aXN0aW5nOiBJZ3hEYXRlUmFuZ2VTdGFydENvbXBvbmVudCB9LFxuICAgICAgICB7IHByb3ZpZGU6IElneERhdGVSYW5nZUlucHV0c0Jhc2VDb21wb25lbnQsIHVzZUV4aXN0aW5nOiBJZ3hEYXRlUmFuZ2VTdGFydENvbXBvbmVudCB9XG4gICAgXVxufSlcbmV4cG9ydCBjbGFzcyBJZ3hEYXRlUmFuZ2VTdGFydENvbXBvbmVudCBleHRlbmRzIElneERhdGVSYW5nZUlucHV0c0Jhc2VDb21wb25lbnQgeyB9XG5cbi8qKlxuICogRGVmaW5lcyB0aGUgZW5kIGlucHV0IGZvciBhIGRhdGUgcmFuZ2UgcGlja2VyXG4gKlxuICogQGlneE1vZHVsZSBJZ3hEYXRlUmFuZ2VNb2R1bGVcbiAqXG4gKiBAaWd4VGhlbWUgaWd4LWlucHV0LWdyb3VwLXRoZW1lLCBpZ3gtY2FsZW5kYXItdGhlbWUsIGlneC1kYXRlLXJhbmdlLXBpY2tlci10aGVtZVxuICpcbiAqIEBpZ3hLZXl3b3JkcyBkYXRlLCByYW5nZSwgZGF0ZSByYW5nZSwgZGF0ZSBwaWNrZXJcbiAqXG4gKiBAaWd4R3JvdXAgc2NoZWR1bGluZ1xuICpcbiAqIEByZW1hcmtzXG4gKiBXaGVuIHRlbXBsYXRpbmcsIGVuZCBpbnB1dCBoYXMgdG8gYmUgdGVtcGxhdGUgc2VwYXJhdGVseVxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBodG1sXG4gKiA8aWd4LWRhdGUtcmFuZ2UtcGlja2VyIG1vZGU9XCJkcm9wZG93blwiPlxuICogICAgICA8aWd4LWRhdGUtcmFuZ2UtZW5kPlxuICogICAgICAgICAgPGlucHV0IGlneElucHV0IGlneERhdGVUaW1lRWRpdG9yIHR5cGU9XCJ0ZXh0XCI+XG4gKiAgICAgIDwvaWd4LWRhdGUtcmFuZ2UtZW5kPlxuICogICAgICAuLi5cbiAqIDwvaWd4LWRhdGUtcmFuZ2UtcGlja2VyPlxuICogYGBgXG4gKi9cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnaWd4LWRhdGUtcmFuZ2UtZW5kJyxcbiAgICB0ZW1wbGF0ZVVybDogJy4uL2lucHV0LWdyb3VwL2lucHV0LWdyb3VwLmNvbXBvbmVudC5odG1sJyxcbiAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgeyBwcm92aWRlOiBJZ3hJbnB1dEdyb3VwQmFzZSwgdXNlRXhpc3Rpbmc6IElneERhdGVSYW5nZUVuZENvbXBvbmVudCB9LFxuICAgICAgICB7IHByb3ZpZGU6IElneERhdGVSYW5nZUlucHV0c0Jhc2VDb21wb25lbnQsIHVzZUV4aXN0aW5nOiBJZ3hEYXRlUmFuZ2VFbmRDb21wb25lbnQgfVxuICAgIF1cbn0pXG5leHBvcnQgY2xhc3MgSWd4RGF0ZVJhbmdlRW5kQ29tcG9uZW50IGV4dGVuZHMgSWd4RGF0ZVJhbmdlSW5wdXRzQmFzZUNvbXBvbmVudCB7IH1cblxuQERpcmVjdGl2ZSh7XG4gICAgc2VsZWN0b3I6ICdbaWd4RGF0ZVJhbmdlU2VwYXJhdG9yXSdcbn0pXG5leHBvcnQgY2xhc3MgSWd4RGF0ZVJhbmdlU2VwYXJhdG9yRGlyZWN0aXZlIHtcbn1cbiJdfQ==