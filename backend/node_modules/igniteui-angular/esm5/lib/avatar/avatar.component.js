import { __decorate } from "tslib";
import { CommonModule } from '@angular/common';
import { Component, ElementRef, HostBinding, Input, NgModule, OnInit, TemplateRef, ViewChild } from '@angular/core';
import { IgxIconModule } from '../icon/public_api';
var NEXT_ID = 0;
export var IgxAvatarSize;
(function (IgxAvatarSize) {
    IgxAvatarSize["SMALL"] = "small";
    IgxAvatarSize["MEDIUM"] = "medium";
    IgxAvatarSize["LARGE"] = "large";
})(IgxAvatarSize || (IgxAvatarSize = {}));
export var IgxAvatarType;
(function (IgxAvatarType) {
    IgxAvatarType["INITIALS"] = "initials";
    IgxAvatarType["IMAGE"] = "image";
    IgxAvatarType["ICON"] = "icon";
    IgxAvatarType["CUSTOM"] = "custom";
})(IgxAvatarType || (IgxAvatarType = {}));
/**
 * Avatar provides a way to display an image, icon or initials to the user.
 *
 * @igxModule IgxAvatarModule
 *
 * @igxTheme igx-avatar-theme, igx-icon-theme
 *
 * @igxKeywords avatar, profile, picture, initials
 *
 * @igxGroup Layouts
 *
 * @remarks
 *
 * The Ignite UI Avatar provides an easy way to add an avatar icon to your application.  This icon can be an
 * image, someone's initials or a material icon from the Google Material icon set.
 *
 * @example
 * ```html
 * <igx-avatar initials="MS" roundShape="true" size="large">
 * </igx-avatar>
 * ```
 */
var IgxAvatarComponent = /** @class */ (function () {
    function IgxAvatarComponent(elementRef) {
        this.elementRef = elementRef;
        /**
         * Returns the `aria-label` attribute of the avatar.
         *
         * @example
         * ```typescript
         * let ariaLabel = this.avatar.ariaLabel;
         * ```
         *
         */
        this.ariaLabel = 'avatar';
        /**
         * Returns the `role` attribute of the avatar.
         *
         * @example
         * ```typescript
         * let avatarRole = this.avatar.role;
         * ```
         */
        this.role = 'img';
        /**
         * Host `class.igx-avatar` binding.
         *
         * @hidden
         * @internal
         */
        this.cssClass = 'igx-avatar';
        /**
         * Sets the `id` of the avatar. If not set, the first avatar component will have `id` = `"igx-avatar-0"`.
         *
         * @example
         * ```html
         * <igx-avatar id="my-first-avatar"></igx-avatar>
         * ```
         */
        this.id = "igx-avatar-" + NEXT_ID++;
        /**
         * Sets a round shape to the avatar, if `roundShape` is set to `true`.
         * By default the shape of the avatar is a square.
         *
         * @example
         * ```html
         * <igx-avatar roundShape="true" ></igx-avatar>
         * ```
         */
        this.roundShape = false;
        /**
         * @hidden
         * @internal
         */
        this._size = IgxAvatarSize.SMALL;
    }
    Object.defineProperty(IgxAvatarComponent.prototype, "size", {
        /**
         * Returns the size of the avatar.
         *
         * @example
         * ```typescript
         * let avatarSize = this.avatar.size;
         * ```
         */
        get: function () {
            return this._size;
        },
        /**
         * Sets the size  of the avatar.
         * By default, the size is `"small"`. It can be set to `"medium"` or `"large"`.
         *
         * @example
         * ```html
         * <igx-avatar size="large"></igx-avatar>
         * ```
         */
        set: function (value) {
            switch (value) {
                case 'small':
                case 'medium':
                case 'large':
                    this._size = value;
                    break;
                default:
                    this._size = 'small';
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(IgxAvatarComponent.prototype, "_isSmallSize", {
        /** @hidden @internal */
        get: function () {
            return this.size === 'small';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(IgxAvatarComponent.prototype, "_isMediumSize", {
        /** @hidden @internal */
        get: function () {
            return this.size === 'medium';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(IgxAvatarComponent.prototype, "_isLargeSize", {
        /** @hidden @internal */
        get: function () {
            return this.size === 'large';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(IgxAvatarComponent.prototype, "type", {
        /**
         * Returns the type of the avatar.
         *
         * @example
         * ```typescript
         * let avatarType = this.avatar.type;
         * ```
         */
        get: function () {
            if (this.src) {
                return IgxAvatarType.IMAGE;
            }
            if (this.icon) {
                return IgxAvatarType.ICON;
            }
            if (this.initials) {
                return IgxAvatarType.INITIALS;
            }
            return IgxAvatarType.CUSTOM;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(IgxAvatarComponent.prototype, "_isImageType", {
        /** @hidden @internal */
        get: function () {
            return this.type === IgxAvatarType.IMAGE;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(IgxAvatarComponent.prototype, "_isIconType", {
        /** @hidden @internal */
        get: function () {
            return this.type === IgxAvatarType.ICON;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(IgxAvatarComponent.prototype, "_isInitialsType", {
        /** @hidden @internal */
        get: function () {
            return this.type === IgxAvatarType.INITIALS;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(IgxAvatarComponent.prototype, "template", {
        /**
         * Returns the template of the avatar.
         *
         * @hidden
         * @internal
         */
        get: function () {
            switch (this.type) {
                case IgxAvatarType.IMAGE:
                    return this.imageTemplate;
                case IgxAvatarType.INITIALS:
                    return this.initialsTemplate;
                case IgxAvatarType.ICON:
                    return this.iconTemplate;
                default:
                    return this.defaultTemplate;
            }
        },
        enumerable: true,
        configurable: true
    });
    /** @hidden @internal */
    IgxAvatarComponent.prototype.ngOnInit = function () {
        this.roleDescription = this.getRole();
    };
    /** @hidden @internal */
    IgxAvatarComponent.prototype.getRole = function () {
        switch (this.type) {
            case IgxAvatarType.IMAGE:
                return 'image avatar';
            case IgxAvatarType.ICON:
                return 'icon avatar';
            case IgxAvatarType.INITIALS:
                return 'initials avatar';
            default:
                return 'custom avatar';
        }
    };
    /**
     * Returns the css url of the image.
     *
     * @hidden
     * @internal
     */
    IgxAvatarComponent.prototype.getSrcUrl = function () {
        return "url(" + this.src + ")";
    };
    IgxAvatarComponent.ctorParameters = function () { return [
        { type: ElementRef }
    ]; };
    __decorate([
        ViewChild('image')
    ], IgxAvatarComponent.prototype, "image", void 0);
    __decorate([
        ViewChild('defaultTemplate', { read: TemplateRef, static: true })
    ], IgxAvatarComponent.prototype, "defaultTemplate", void 0);
    __decorate([
        ViewChild('imageTemplate', { read: TemplateRef, static: true })
    ], IgxAvatarComponent.prototype, "imageTemplate", void 0);
    __decorate([
        ViewChild('initialsTemplate', { read: TemplateRef, static: true })
    ], IgxAvatarComponent.prototype, "initialsTemplate", void 0);
    __decorate([
        ViewChild('iconTemplate', { read: TemplateRef, static: true })
    ], IgxAvatarComponent.prototype, "iconTemplate", void 0);
    __decorate([
        HostBinding('attr.aria-label')
    ], IgxAvatarComponent.prototype, "ariaLabel", void 0);
    __decorate([
        HostBinding('attr.role')
    ], IgxAvatarComponent.prototype, "role", void 0);
    __decorate([
        HostBinding('class.igx-avatar')
    ], IgxAvatarComponent.prototype, "cssClass", void 0);
    __decorate([
        HostBinding('attr.aria-roledescription')
    ], IgxAvatarComponent.prototype, "roleDescription", void 0);
    __decorate([
        HostBinding('attr.id'),
        Input()
    ], IgxAvatarComponent.prototype, "id", void 0);
    __decorate([
        HostBinding('class.igx-avatar--rounded'),
        Input()
    ], IgxAvatarComponent.prototype, "roundShape", void 0);
    __decorate([
        HostBinding('style.color'),
        Input()
    ], IgxAvatarComponent.prototype, "color", void 0);
    __decorate([
        HostBinding('style.background'),
        Input()
    ], IgxAvatarComponent.prototype, "bgColor", void 0);
    __decorate([
        Input()
    ], IgxAvatarComponent.prototype, "initials", void 0);
    __decorate([
        Input()
    ], IgxAvatarComponent.prototype, "icon", void 0);
    __decorate([
        Input()
    ], IgxAvatarComponent.prototype, "src", void 0);
    __decorate([
        Input()
    ], IgxAvatarComponent.prototype, "size", null);
    __decorate([
        HostBinding('class.igx-avatar--small')
    ], IgxAvatarComponent.prototype, "_isSmallSize", null);
    __decorate([
        HostBinding('class.igx-avatar--medium')
    ], IgxAvatarComponent.prototype, "_isMediumSize", null);
    __decorate([
        HostBinding('class.igx-avatar--large')
    ], IgxAvatarComponent.prototype, "_isLargeSize", null);
    __decorate([
        HostBinding('class.igx-avatar--image')
    ], IgxAvatarComponent.prototype, "_isImageType", null);
    __decorate([
        HostBinding('class.igx-avatar--icon')
    ], IgxAvatarComponent.prototype, "_isIconType", null);
    __decorate([
        HostBinding('class.igx-avatar--initials')
    ], IgxAvatarComponent.prototype, "_isInitialsType", null);
    IgxAvatarComponent = __decorate([
        Component({
            selector: 'igx-avatar',
            template: "<ng-template #defaultTemplate>\n    <ng-content></ng-content>\n</ng-template>\n\n<ng-template #imageTemplate>\n    <div #image class=\"igx-avatar__image\" [style.backgroundImage]=\"getSrcUrl()\"></div>\n</ng-template>\n\n<ng-template #initialsTemplate>\n    <span>{{initials.substring(0, 2)}}</span>\n</ng-template>\n\n<ng-template #iconTemplate>\n     <igx-icon>{{icon}}</igx-icon>\n</ng-template>\n\n<ng-container *ngTemplateOutlet=\"template\"></ng-container>\n"
        })
    ], IgxAvatarComponent);
    return IgxAvatarComponent;
}());
export { IgxAvatarComponent };
/**
 * @hidden
 */
var IgxAvatarModule = /** @class */ (function () {
    function IgxAvatarModule() {
    }
    IgxAvatarModule = __decorate([
        NgModule({
            declarations: [IgxAvatarComponent],
            exports: [IgxAvatarComponent],
            imports: [CommonModule, IgxIconModule]
        })
    ], IgxAvatarModule);
    return IgxAvatarModule;
}());
export { IgxAvatarModule };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXZhdGFyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL2lnbml0ZXVpLWFuZ3VsYXIvIiwic291cmNlcyI6WyJsaWIvYXZhdGFyL2F2YXRhci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUMvQyxPQUFPLEVBQ0gsU0FBUyxFQUNULFVBQVUsRUFDVixXQUFXLEVBQ1gsS0FBSyxFQUNMLFFBQVEsRUFDUixNQUFNLEVBQ04sV0FBVyxFQUNYLFNBQVMsRUFDWixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFFbkQsSUFBSSxPQUFPLEdBQUcsQ0FBQyxDQUFDO0FBRWhCLE1BQU0sQ0FBTixJQUFZLGFBSVg7QUFKRCxXQUFZLGFBQWE7SUFDckIsZ0NBQWUsQ0FBQTtJQUNmLGtDQUFpQixDQUFBO0lBQ2pCLGdDQUFlLENBQUE7QUFDbkIsQ0FBQyxFQUpXLGFBQWEsS0FBYixhQUFhLFFBSXhCO0FBRUQsTUFBTSxDQUFOLElBQVksYUFLWDtBQUxELFdBQVksYUFBYTtJQUNyQixzQ0FBcUIsQ0FBQTtJQUNyQixnQ0FBZSxDQUFBO0lBQ2YsOEJBQWEsQ0FBQTtJQUNiLGtDQUFpQixDQUFBO0FBQ3JCLENBQUMsRUFMVyxhQUFhLEtBQWIsYUFBYSxRQUt4QjtBQUVEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0FxQkc7QUFLSDtJQXNSSSw0QkFBbUIsVUFBc0I7UUFBdEIsZUFBVSxHQUFWLFVBQVUsQ0FBWTtRQXpQekM7Ozs7Ozs7O1dBUUc7UUFFSSxjQUFTLEdBQUcsUUFBUSxDQUFDO1FBRTVCOzs7Ozs7O1dBT0c7UUFFSSxTQUFJLEdBQUcsS0FBSyxDQUFDO1FBRXBCOzs7OztXQUtHO1FBRUksYUFBUSxHQUFHLFlBQVksQ0FBQztRQWtCL0I7Ozs7Ozs7V0FPRztRQUdJLE9BQUUsR0FBRyxnQkFBYyxPQUFP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QjtJQWExQjtRQUZDLFdBQVcsQ0FBQyxhQUFhLENBQUM7UUFDMUIsS0FBSyxFQUFFO3FEQUNhO0lBY3JCO1FBRkMsV0FBVyxDQUFDLGtCQUFrQixDQUFDO1FBQy9CLEtBQUssRUFBRTt1REFDZTtJQVd2QjtRQURDLEtBQUssRUFBRTt3REFDZ0I7SUFXeEI7UUFEQyxLQUFLLEVBQUU7b0RBQ1k7SUFZcEI7UUFEQyxLQUFLLEVBQUU7bURBQ1c7SUFnQm5CO1FBREMsS0FBSyxFQUFFO2tEQUdQO0lBeUJEO1FBREMsV0FBVyxDQUFDLHlCQUF5QixDQUFDOzBEQUd0QztJQUdEO1FBREMsV0FBVyxDQUFDLDBCQUEwQixDQUFDOzJEQUd2QztJQUdEO1FBREMsV0FBVyxDQUFDLHlCQUF5QixDQUFDOzBEQUd0QztJQTRCRDtRQURDLFdBQVcsQ0FBQyx5QkFBeUIsQ0FBQzswREFHdEM7SUFHRDtRQURDLFdBQVcsQ0FBQyx3QkFBd0IsQ0FBQzt5REFHckM7SUFHRDtRQURDLFdBQVcsQ0FBQyw0QkFBNEIsQ0FBQzs2REFHekM7SUFqUVEsa0JBQWtCO1FBSjlCLFNBQVMsQ0FBQztZQUNQLFFBQVEsRUFBRSxZQUFZO1lBQ3RCLDRkQUFvQztTQUN2QyxDQUFDO09BQ1csa0JBQWtCLENBb1Q5QjtJQUFELHlCQUFDO0NBQUEsQUFwVEQsSUFvVEM7U0FwVFksa0JBQWtCO0FBc1QvQjs7R0FFRztBQU1IO0lBQUE7SUFBK0IsQ0FBQztJQUFuQixlQUFlO1FBTDNCLFFBQVEsQ0FBQztZQUNOLFlBQVksRUFBRSxDQUFDLGtCQUFrQixDQUFDO1lBQ2xDLE9BQU8sRUFBRSxDQUFDLGtCQUFrQixDQUFDO1lBQzdCLE9BQU8sRUFBRSxDQUFDLFlBQVksRUFBRSxhQUFhLENBQUM7U0FDekMsQ0FBQztPQUNXLGVBQWUsQ0FBSTtJQUFELHNCQUFDO0NBQUEsQUFBaEMsSUFBZ0M7U0FBbkIsZUFBZSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQge1xuICAgIENvbXBvbmVudCxcbiAgICBFbGVtZW50UmVmLFxuICAgIEhvc3RCaW5kaW5nLFxuICAgIElucHV0LFxuICAgIE5nTW9kdWxlLFxuICAgIE9uSW5pdCxcbiAgICBUZW1wbGF0ZVJlZixcbiAgICBWaWV3Q2hpbGRcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBJZ3hJY29uTW9kdWxlIH0gZnJvbSAnLi4vaWNvbi9wdWJsaWNfYXBpJztcblxubGV0IE5FWFRfSUQgPSAwO1xuXG5leHBvcnQgZW51bSBJZ3hBdmF0YXJTaXplIHtcbiAgICBTTUFMTCA9ICdzbWFsbCcsXG4gICAgTUVESVVNID0gJ21lZGl1bScsXG4gICAgTEFSR0UgPSAnbGFyZ2UnXG59XG5cbmV4cG9ydCBlbnVtIElneEF2YXRhclR5cGUge1xuICAgIElOSVRJQUxTID0gJ2luaXRpYWxzJyxcbiAgICBJTUFHRSA9ICdpbWFnZScsXG4gICAgSUNPTiA9ICdpY29uJyxcbiAgICBDVVNUT00gPSAnY3VzdG9tJyxcbn1cblxuLyoqXG4gKiBBdmF0YXIgcHJvdmlkZXMgYSB3YXkgdG8gZGlzcGxheSBhbiBpbWFnZSwgaWNvbiBvciBpbml0aWFscyB0byB0aGUgdXNlci5cbiAqXG4gKiBAaWd4TW9kdWxlIElneEF2YXRhck1vZHVsZVxuICpcbiAqIEBpZ3hUaGVtZSBpZ3gtYXZhdGFyLXRoZW1lLCBpZ3gtaWNvbi10aGVtZVxuICpcbiAqIEBpZ3hLZXl3b3JkcyBhdmF0YXIsIHByb2ZpbGUsIHBpY3R1cmUsIGluaXRpYWxzXG4gKlxuICogQGlneEdyb3VwIExheW91dHNcbiAqXG4gKiBAcmVtYXJrc1xuICpcbiAqIFRoZSBJZ25pdGUgVUkgQXZhdGFyIHByb3ZpZGVzIGFuIGVhc3kgd2F5IHRvIGFkZCBhbiBhdmF0YXIgaWNvbiB0byB5b3VyIGFwcGxpY2F0aW9uLiAgVGhpcyBpY29uIGNhbiBiZSBhblxuICogaW1hZ2UsIHNvbWVvbmUncyBpbml0aWFscyBvciBhIG1hdGVyaWFsIGljb24gZnJvbSB0aGUgR29vZ2xlIE1hdGVyaWFsIGljb24gc2V0LlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBodG1sXG4gKiA8aWd4LWF2YXRhciBpbml0aWFscz1cIk1TXCIgcm91bmRTaGFwZT1cInRydWVcIiBzaXplPVwibGFyZ2VcIj5cbiAqIDwvaWd4LWF2YXRhcj5cbiAqIGBgYFxuICovXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ2lneC1hdmF0YXInLFxuICAgIHRlbXBsYXRlVXJsOiAnYXZhdGFyLmNvbXBvbmVudC5odG1sJ1xufSlcbmV4cG9ydCBjbGFzcyBJZ3hBdmF0YXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBpcyBhIHJlZmVyZW5jZSB0byB0aGUgYXZhdGFyIGltYWdlIGVsZW1lbnQgaW4gdGhlIERPTS5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgdHlwZXNjcmlwdFxuICAgICAqICBsZXQgaW1hZ2UgPSB0aGlzLmF2YXRhci5pbWFnZTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBAVmlld0NoaWxkKCdpbWFnZScpXG4gICAgcHVibGljIGltYWdlOiBFbGVtZW50UmVmO1xuXG4gICAgLyoqIEBoaWRkZW4gQGludGVybmFsICovXG4gICAgQFZpZXdDaGlsZCgnZGVmYXVsdFRlbXBsYXRlJywgeyByZWFkOiBUZW1wbGF0ZVJlZiwgc3RhdGljOiB0cnVlIH0pXG4gICAgcHJvdGVjdGVkIGRlZmF1bHRUZW1wbGF0ZTogVGVtcGxhdGVSZWY8YW55PjtcblxuICAgIC8qKiBAaGlkZGVuIEBpbnRlcm5hbCAqL1xuICAgIEBWaWV3Q2hpbGQoJ2ltYWdlVGVtcGxhdGUnLCB7IHJlYWQ6IFRlbXBsYXRlUmVmLCBzdGF0aWM6IHRydWUgfSlcbiAgICBwcm90ZWN0ZWQgaW1hZ2VUZW1wbGF0ZTogVGVtcGxhdGVSZWY8YW55PjtcblxuICAgIC8qKiBAaGlkZGVuIEBpbnRlcm5hbCAqL1xuICAgIEBWaWV3Q2hpbGQoJ2luaXRpYWxzVGVtcGxhdGUnLCB7IHJlYWQ6IFRlbXBsYXRlUmVmLCBzdGF0aWM6IHRydWUgfSlcbiAgICBwcm90ZWN0ZWQgaW5pdGlhbHNUZW1wbGF0ZTogVGVtcGxhdGVSZWY8YW55PjtcblxuICAgIC8qKiBAaGlkZGVuIEBpbnRlcm5hbCAqL1xuICAgIEBWaWV3Q2hpbGQoJ2ljb25UZW1wbGF0ZScsIHsgcmVhZDogVGVtcGxhdGVSZWYsIHN0YXRpYzogdHJ1ZSB9KVxuICAgIHByb3RlY3RlZCBpY29uVGVtcGxhdGU6IFRlbXBsYXRlUmVmPGFueT47XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBgYXJpYS1sYWJlbGAgYXR0cmlidXRlIG9mIHRoZSBhdmF0YXIuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYHR5cGVzY3JpcHRcbiAgICAgKiBsZXQgYXJpYUxhYmVsID0gdGhpcy5hdmF0YXIuYXJpYUxhYmVsO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICovXG4gICAgQEhvc3RCaW5kaW5nKCdhdHRyLmFyaWEtbGFiZWwnKVxuICAgIHB1YmxpYyBhcmlhTGFiZWwgPSAnYXZhdGFyJztcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGByb2xlYCBhdHRyaWJ1dGUgb2YgdGhlIGF2YXRhci5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgdHlwZXNjcmlwdFxuICAgICAqIGxldCBhdmF0YXJSb2xlID0gdGhpcy5hdmF0YXIucm9sZTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBASG9zdEJpbmRpbmcoJ2F0dHIucm9sZScpXG4gICAgcHVibGljIHJvbGUgPSAnaW1nJztcblxuICAgIC8qKlxuICAgICAqIEhvc3QgYGNsYXNzLmlneC1hdmF0YXJgIGJpbmRpbmcuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcy5pZ3gtYXZhdGFyJylcbiAgICBwdWJsaWMgY3NzQ2xhc3MgPSAnaWd4LWF2YXRhcic7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB0eXBlIG9mIHRoZSBhdmF0YXIuXG4gICAgICogVGhlIGF2YXRhciBjYW4gYmU6XG4gICAgICogLSBgXCJpbml0aWFscyB0eXBlIGF2YXRhclwiYFxuICAgICAqIC0gYFwiaWNvbiB0eXBlIGF2YXRhclwiYFxuICAgICAqIC0gYFwiaW1hZ2UgdHlwZSBhdmF0YXJcImAuXG4gICAgICogLSBgXCJjdXN0b20gdHlwZSBhdmF0YXJcImAuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYHR5cGVzY3JpcHRcbiAgICAgKiBsZXQgYXZhdGFyRGVzY3JpcHRpb24gPSB0aGlzLmF2YXRhci5yb2xlRGVzY3JpcHRpb247XG4gICAgICogYGBgXG4gICAgICovXG4gICAgQEhvc3RCaW5kaW5nKCdhdHRyLmFyaWEtcm9sZWRlc2NyaXB0aW9uJylcbiAgICBwdWJsaWMgcm9sZURlc2NyaXB0aW9uOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBgaWRgIG9mIHRoZSBhdmF0YXIuIElmIG5vdCBzZXQsIHRoZSBmaXJzdCBhdmF0YXIgY29tcG9uZW50IHdpbGwgaGF2ZSBgaWRgID0gYFwiaWd4LWF2YXRhci0wXCJgLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBodG1sXG4gICAgICogPGlneC1hdmF0YXIgaWQ9XCJteS1maXJzdC1hdmF0YXJcIj48L2lneC1hdmF0YXI+XG4gICAgICogYGBgXG4gICAgICovXG4gICAgQEhvc3RCaW5kaW5nKCdhdHRyLmlkJylcbiAgICBASW5wdXQoKVxuICAgIHB1YmxpYyBpZCA9IGBpZ3gtYXZhdGFyLSR7TkVYVF9JRCsrfWA7XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIGEgcm91bmQgc2hhcGUgdG8gdGhlIGF2YXRhciwgaWYgYHJvdW5kU2hhcGVgIGlzIHNldCB0byBgdHJ1ZWAuXG4gICAgICogQnkgZGVmYXVsdCB0aGUgc2hhcGUgb2YgdGhlIGF2YXRhciBpcyBhIHNxdWFyZS5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgaHRtbFxuICAgICAqIDxpZ3gtYXZhdGFyIHJvdW5kU2hhcGU9XCJ0cnVlXCIgPjwvaWd4LWF2YXRhcj5cbiAgICAgKiBgYGBcbiAgICAgKi9cblxuICAgIEBIb3N0QmluZGluZygnY2xhc3MuaWd4LWF2YXRhci0tcm91bmRlZCcpXG4gICAgQElucHV0KClcbiAgICBwdWJsaWMgcm91bmRTaGFwZSA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgY29sb3Igb2YgdGhlIGF2YXRhcidzIGluaXRpYWxzIG9yIGljb24uXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYGh0bWxcbiAgICAgKiA8aWd4LWF2YXRhciBjb2xvcj1cImJsdWVcIj48L2lneC1hdmF0YXI+XG4gICAgICogYGBgXG4gICAgICovXG5cbiAgICBASG9zdEJpbmRpbmcoJ3N0eWxlLmNvbG9yJylcbiAgICBASW5wdXQoKVxuICAgIHB1YmxpYyBjb2xvcjogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgYmFja2dyb3VuZCBjb2xvciBvZiB0aGUgYXZhdGFyLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBodG1sXG4gICAgICogPGlneC1hdmF0YXIgYmdDb2xvcj1cInllbGxvd1wiPjwvaWd4LWF2YXRhcj5cbiAgICAgKiBgYGBcbiAgICAgKiBAaWd4RnJpZW5kbHlOYW1lIEJhY2tncm91bmQgY29sb3JcbiAgICAgKi9cblxuICAgIEBIb3N0QmluZGluZygnc3R5bGUuYmFja2dyb3VuZCcpXG4gICAgQElucHV0KClcbiAgICBwdWJsaWMgYmdDb2xvcjogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogU2V0cyBpbml0aWFscyB0byB0aGUgYXZhdGFyLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBodG1sXG4gICAgICogPGlneC1hdmF0YXIgaW5pdGlhbHM9XCJNTlwiPjwvaWd4LWF2YXRhcj5cbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBASW5wdXQoKVxuICAgIHB1YmxpYyBpbml0aWFsczogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogU2V0cyBhbiBpY29uIHRvIHRoZSBhdmF0YXIuIEFsbCBpY29ucyBmcm9tIHRoZSBtYXRlcmlhbCBpY29uIHNldCBhcmUgc3VwcG9ydGVkLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBodG1sXG4gICAgICogPGlneC1hdmF0YXIgaWNvbj1cInBob25lXCI+PC9pZ3gtYXZhdGFyPlxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIEBJbnB1dCgpXG4gICAgcHVibGljIGljb246IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGltYWdlIHNvdXJjZSBvZiB0aGUgYXZhdGFyLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBodG1sXG4gICAgICogPGlneC1hdmF0YXIgc3JjPVwiaW1hZ2VzL3BpY3R1cmUuanBnXCI+PC9pZ3gtYXZhdGFyPlxuICAgICAqIGBgYFxuICAgICAqIEBpZ3hGcmllbmRseU5hbWUgSW1hZ2UgVVJMXG4gICAgICovXG4gICAgQElucHV0KClcbiAgICBwdWJsaWMgc3JjOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgcHJpdmF0ZSBfc2l6ZTogc3RyaW5nIHwgSWd4QXZhdGFyU2l6ZSA9IElneEF2YXRhclNpemUuU01BTEw7XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgc2l6ZSBvZiB0aGUgYXZhdGFyLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGB0eXBlc2NyaXB0XG4gICAgICogbGV0IGF2YXRhclNpemUgPSB0aGlzLmF2YXRhci5zaXplO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIEBJbnB1dCgpXG4gICAgcHVibGljIGdldCBzaXplKCk6IHN0cmluZyB8IElneEF2YXRhclNpemUge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2l6ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBzaXplICBvZiB0aGUgYXZhdGFyLlxuICAgICAqIEJ5IGRlZmF1bHQsIHRoZSBzaXplIGlzIGBcInNtYWxsXCJgLiBJdCBjYW4gYmUgc2V0IHRvIGBcIm1lZGl1bVwiYCBvciBgXCJsYXJnZVwiYC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgaHRtbFxuICAgICAqIDxpZ3gtYXZhdGFyIHNpemU9XCJsYXJnZVwiPjwvaWd4LWF2YXRhcj5cbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0IHNpemUodmFsdWU6IHN0cmluZyB8IElneEF2YXRhclNpemUpIHtcbiAgICAgICAgc3dpdGNoICh2YWx1ZSkge1xuICAgICAgICAgICAgY2FzZSAnc21hbGwnOlxuICAgICAgICAgICAgY2FzZSAnbWVkaXVtJzpcbiAgICAgICAgICAgIGNhc2UgJ2xhcmdlJzpcbiAgICAgICAgICAgICAgICB0aGlzLl9zaXplID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRoaXMuX3NpemUgPSAnc21hbGwnO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqIEBoaWRkZW4gQGludGVybmFsICovXG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcy5pZ3gtYXZhdGFyLS1zbWFsbCcpXG4gICAgZ2V0IF9pc1NtYWxsU2l6ZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ3NtYWxsJztcbiAgICB9XG4gICAgLyoqIEBoaWRkZW4gQGludGVybmFsICovXG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcy5pZ3gtYXZhdGFyLS1tZWRpdW0nKVxuICAgIGdldCBfaXNNZWRpdW1TaXplKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAnbWVkaXVtJztcbiAgICB9XG4gICAgLyoqIEBoaWRkZW4gQGludGVybmFsICovXG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcy5pZ3gtYXZhdGFyLS1sYXJnZScpXG4gICAgZ2V0IF9pc0xhcmdlU2l6ZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ2xhcmdlJztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB0eXBlIG9mIHRoZSBhdmF0YXIuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYHR5cGVzY3JpcHRcbiAgICAgKiBsZXQgYXZhdGFyVHlwZSA9IHRoaXMuYXZhdGFyLnR5cGU7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgZ2V0IHR5cGUoKTogSWd4QXZhdGFyVHlwZSB7XG4gICAgICAgIGlmICh0aGlzLnNyYykge1xuICAgICAgICAgICAgcmV0dXJuIElneEF2YXRhclR5cGUuSU1BR0U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5pY29uKSB7XG4gICAgICAgICAgICByZXR1cm4gSWd4QXZhdGFyVHlwZS5JQ09OO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuaW5pdGlhbHMpIHtcbiAgICAgICAgICAgIHJldHVybiBJZ3hBdmF0YXJUeXBlLklOSVRJQUxTO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIElneEF2YXRhclR5cGUuQ1VTVE9NO1xuICAgIH1cblxuICAgIC8qKiBAaGlkZGVuIEBpbnRlcm5hbCAqL1xuICAgIEBIb3N0QmluZGluZygnY2xhc3MuaWd4LWF2YXRhci0taW1hZ2UnKVxuICAgIGdldCBfaXNJbWFnZVR5cGUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLnR5cGUgPT09IElneEF2YXRhclR5cGUuSU1BR0U7XG4gICAgfVxuICAgIC8qKiBAaGlkZGVuIEBpbnRlcm5hbCAqL1xuICAgIEBIb3N0QmluZGluZygnY2xhc3MuaWd4LWF2YXRhci0taWNvbicpXG4gICAgZ2V0IF9pc0ljb25UeXBlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy50eXBlID09PSBJZ3hBdmF0YXJUeXBlLklDT047XG4gICAgfVxuICAgIC8qKiBAaGlkZGVuIEBpbnRlcm5hbCAqL1xuICAgIEBIb3N0QmluZGluZygnY2xhc3MuaWd4LWF2YXRhci0taW5pdGlhbHMnKVxuICAgIGdldCBfaXNJbml0aWFsc1R5cGUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLnR5cGUgPT09IElneEF2YXRhclR5cGUuSU5JVElBTFM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdGVtcGxhdGUgb2YgdGhlIGF2YXRhci5cbiAgICAgKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBnZXQgdGVtcGxhdGUoKTogVGVtcGxhdGVSZWY8YW55PiB7XG4gICAgICAgIHN3aXRjaCAodGhpcy50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIElneEF2YXRhclR5cGUuSU1BR0U6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW1hZ2VUZW1wbGF0ZTtcbiAgICAgICAgICAgIGNhc2UgSWd4QXZhdGFyVHlwZS5JTklUSUFMUzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbml0aWFsc1RlbXBsYXRlO1xuICAgICAgICAgICAgY2FzZSBJZ3hBdmF0YXJUeXBlLklDT046XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaWNvblRlbXBsYXRlO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0VGVtcGxhdGU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgZWxlbWVudFJlZjogRWxlbWVudFJlZikgeyB9XG5cbiAgICAvKiogQGhpZGRlbiBAaW50ZXJuYWwgKi9cbiAgICBwdWJsaWMgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMucm9sZURlc2NyaXB0aW9uID0gdGhpcy5nZXRSb2xlKCk7XG4gICAgfVxuXG4gICAgLyoqIEBoaWRkZW4gQGludGVybmFsICovXG4gICAgcHJpdmF0ZSBnZXRSb2xlKCk6IHN0cmluZyB7XG4gICAgICAgIHN3aXRjaCAodGhpcy50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIElneEF2YXRhclR5cGUuSU1BR0U6XG4gICAgICAgICAgICAgICAgcmV0dXJuICdpbWFnZSBhdmF0YXInO1xuICAgICAgICAgICAgY2FzZSBJZ3hBdmF0YXJUeXBlLklDT046XG4gICAgICAgICAgICAgICAgcmV0dXJuICdpY29uIGF2YXRhcic7XG4gICAgICAgICAgICBjYXNlIElneEF2YXRhclR5cGUuSU5JVElBTFM6XG4gICAgICAgICAgICAgICAgcmV0dXJuICdpbml0aWFscyBhdmF0YXInO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2N1c3RvbSBhdmF0YXInO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3NzIHVybCBvZiB0aGUgaW1hZ2UuXG4gICAgICpcbiAgICAgKiBAaGlkZGVuXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgcHVibGljIGdldFNyY1VybCgpIHtcbiAgICAgICAgcmV0dXJuIGB1cmwoJHt0aGlzLnNyY30pYDtcbiAgICB9XG59XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5ATmdNb2R1bGUoe1xuICAgIGRlY2xhcmF0aW9uczogW0lneEF2YXRhckNvbXBvbmVudF0sXG4gICAgZXhwb3J0czogW0lneEF2YXRhckNvbXBvbmVudF0sXG4gICAgaW1wb3J0czogW0NvbW1vbk1vZHVsZSwgSWd4SWNvbk1vZHVsZV1cbn0pXG5leHBvcnQgY2xhc3MgSWd4QXZhdGFyTW9kdWxlIHsgfVxuIl19